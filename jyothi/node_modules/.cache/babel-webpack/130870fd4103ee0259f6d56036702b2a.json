{"ast":null,"code":"import { bookingUrls } from 'src/api-urls';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"ngx-perfect-scrollbar\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../../../shared/pipes/santizer.pipe\";\n\nconst _c0 = function (a0) {\n  return {\n    \"border-left\": a0,\n    \"list-group-item\": true\n  };\n};\n\nfunction ViewAllComponent_li_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 11);\n    i0.ɵɵlistener(\"click\", function ViewAllComponent_li_16_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const item_r3 = restoredCtx.$implicit;\n      const i_r4 = restoredCtx.index;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.eachItem(item_r3, i_r4);\n    });\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"div\", 12);\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵelementStart(5, \"b\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"slice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\");\n    i0.ɵɵelement(9, \"span\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(5, _c0, ctx_r0.selectedIndex == i_r4));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"#\", i0.ɵɵpipeBind2(7, 2, item_r3.agreement, 7), \"\");\n  }\n}\n\nfunction ViewAllComponent_div_17_object_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"object\", 17);\n    i0.ɵɵpipe(1, \"santizer\");\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"data\", i0.ɵɵpipeBind1(1, 1, ctx_r7.domain + ctx_r7.pdfData.agreement), i0.ɵɵsanitizeResourceUrl);\n  }\n}\n\nfunction ViewAllComponent_div_17_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelementStart(1, \"div\", 19);\n    i0.ɵɵelement(2, \"img\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r8.domain + ctx_r8.pdfData.agreement, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ViewAllComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, ViewAllComponent_div_17_object_1_Template, 2, 3, \"object\", 15);\n    i0.ɵɵtemplate(2, ViewAllComponent_div_17_div_2_Template, 3, 1, \"div\", 16);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.pdfData.agreement == null ? null : ctx_r1.pdfData.agreement.includes(\"pdf\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r1.pdfData.agreement == null ? null : ctx_r1.pdfData.agreement.includes(\"pdf\")));\n  }\n}\n\nfunction ViewAllComponent_div_18_object_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"object\", 17);\n    i0.ɵɵpipe(1, \"santizer\");\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"data\", i0.ɵɵpipeBind1(1, 1, ctx_r9.domain + ctx_r9.eachPdf), i0.ɵɵsanitizeResourceUrl);\n  }\n}\n\nfunction ViewAllComponent_div_18_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelementStart(1, \"div\", 19);\n    i0.ɵɵelement(2, \"img\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r10.domain + ctx_r10.eachPdf, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ViewAllComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, ViewAllComponent_div_18_object_1_Template, 2, 3, \"object\", 15);\n    i0.ɵɵtemplate(2, ViewAllComponent_div_18_div_2_Template, 3, 1, \"div\", 16);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.eachPdf == null ? null : ctx_r2.eachPdf.includes(\"pdf\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r2.eachPdf == null ? null : ctx_r2.eachPdf.includes(\"pdf\")));\n  }\n}\n\nexport let ViewAllComponent = /*#__PURE__*/(() => {\n  class ViewAllComponent {\n    constructor(http, toaster, activatedRoute) {\n      this.http = http;\n      this.toaster = toaster;\n      this.activatedRoute = activatedRoute;\n      this.config = {};\n      this.agreements = [];\n      this.domain = environment.bookingDomain;\n    }\n\n    ngOnInit() {\n      this.activatedRoute.queryParams.subscribe(res => {\n        this.contractDetails = res.id;\n        this.name = res.name;\n      });\n      this.getContractDetails();\n    }\n\n    getContractDetails() {\n      let filters = []; // filters.push([\"Agreements\", \"parent\", \"=\", `${this.contractDetails}`])\n\n      this.http.get(bookingUrls.contracts + `/${this.contractDetails}`, {\n        params: {\n          fields: JSON.stringify([\"*\"]),\n          limit_page_length: \"None\"\n        }\n      }).subscribe(res => {\n        if (res) {\n          console.log(res.data);\n          let data = res.data.agreement;\n          this.agreements = res.data.agreement;\n          let pdf = data.filter(item => {\n            if (item.name === this.name) {\n              return item;\n            }\n          });\n          this.pdfData = pdf.length ? pdf[0] : [];\n        }\n      }, error => {\n        this.toaster.error(error.error._server_messages);\n      });\n    }\n\n    eachItem(item, index) {\n      this.eachPdf = item.agreement;\n      this.selectedIndex = index;\n    }\n\n    sendEmail() {\n      let obj = {\n        name: \"department_name\",\n        agreement: [\"/files/508356.pdf\", \"/files/508356.pdf\"]\n      };\n      this.http.post(bookingUrls.sendEmail, obj).subscribe(res => {\n        console.log(res);\n      });\n    }\n\n    back() {\n      window.history.back();\n    }\n\n  }\n\n  ViewAllComponent.ɵfac = function ViewAllComponent_Factory(t) {\n    return new (t || ViewAllComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n\n  ViewAllComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ViewAllComponent,\n    selectors: [[\"app-view-all\"]],\n    decls: 19,\n    vars: 4,\n    consts: [[1, \"container-fluid\", \"px-4\"], [1, \"row\"], [1, \"col-md-3\"], [1, \"mt-3\"], [1, \"ri-arrow-left-line\", \"back\", 3, \"click\"], [1, \"form-group\", \"mb-1\"], [\"id\", \"my-select\", \"name\", \"\", 1, \"form-control\"], [1, \"ps\", \"mt-2\", 2, \"position\", \"relative\", \"max-height\", \"100vh\", 3, \"perfectScrollbar\"], [1, \"list-unstyled\"], [\"class\", \"bg-white shadow-sm each-card\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"col-md-9\", 4, \"ngIf\"], [1, \"bg-white\", \"shadow-sm\", \"each-card\", 3, \"ngClass\", \"click\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"time-date\"], [1, \"col-md-9\"], [\"type\", \"\", 3, \"data\", 4, \"ngIf\"], [\"class\", \"card\", 4, \"ngIf\"], [\"type\", \"\", 3, \"data\"], [1, \"card\"], [1, \"card-body\"], [\"alt\", \"\", 1, \"img-fluid\", 3, \"src\"]],\n    template: function ViewAllComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"h5\");\n        i0.ɵɵelementStart(6, \"i\", 4);\n        i0.ɵɵlistener(\"click\", function ViewAllComponent_Template_i_click_6_listener() {\n          return ctx.back();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"strong\");\n        i0.ɵɵtext(8, \"Contracts\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\");\n        i0.ɵɵelementStart(10, \"div\", 5);\n        i0.ɵɵelementStart(11, \"select\", 6);\n        i0.ɵɵelementStart(12, \"option\");\n        i0.ɵɵtext(13, \"All Documents\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 7);\n        i0.ɵɵelementStart(15, \"ul\", 8);\n        i0.ɵɵtemplate(16, ViewAllComponent_li_16_Template, 10, 7, \"li\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, ViewAllComponent_div_17_Template, 3, 2, \"div\", 10);\n        i0.ɵɵtemplate(18, ViewAllComponent_div_18_Template, 3, 2, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"perfectScrollbar\", ctx.config);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.agreements);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.eachPdf);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.eachPdf);\n      }\n    },\n    directives: [i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i5.PerfectScrollbarDirective, i6.NgForOf, i6.NgIf, i6.NgClass],\n    pipes: [i6.SlicePipe, i7.SantizerPipe],\n    styles: [\"object[_ngcontent-%COMP%]{width:100%;height:100vh}.each-card[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:10px;position:relative}.each-card[_ngcontent-%COMP%]:hover{cursor:pointer;transition:.9s;margin-left:5px}.each-card.border-left[_ngcontent-%COMP%]{border-left:5px solid var(--primary)!important}li[_ngcontent-%COMP%]{padding:18px 15px}li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;top:6px}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:0;font-size:15px}li[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{line-height:0;display:block;padding-top:6px}li[_ngcontent-%COMP%]   .time-date[_ngcontent-%COMP%]{line-height:1;font-size:12px;display:block}.back[_ngcontent-%COMP%]{font-size:25px;cursor:pointer;margin-right:5px}\"]\n  });\n  return ViewAllComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}